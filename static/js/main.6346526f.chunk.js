(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{32:function(t,e,n){},33:function(t,e,n){"use strict";n.r(e);var o,r,i=n(1),c=n.n(i),a=n(10),s=n.n(a),u=n(2),l=function(){var t=document.querySelector("#drawflow").querySelector(".drawflow"),e=t.getBoundingClientRect();return{x:e.x,y:e.y,width:t.clientWidth,height:t.clientHeight}},d={createCurvature:function(t,e){var n=(t.y-e.y)/2,o=t.x-e.x;return"M ".concat(t.x," ").concat(t.y," v ").concat(-n," h ").concat(-o," v ").concat(-n," ")},getCanvasInfo:l,getPos:function(t,e,n){var o=l(),r=o.x,i=o.y,c=o.width,a=o.height;return{x:t*(c/(c*n))-r*(c/(c*n)),y:e*(a/(a*n))-i*(a/(a*n))}},findIndexByElement:function(t){for(var e=t.parentElement,n=Array.from(e.childNodes),o=0;o<n.length;o++)if(n[o]===t)return o;return-1},getPortPosWithZoom:function(t,e,n){var o=d.getCanvasInfo(),r=1/n;return{x:t.width/2+(e.x-o.x)*r,y:t.height/2+(e.y-o.y)*r}}},f=d,h=n(3),v=n(4);!function(t){t.START="START",t.MIDDLE="MIDDLE",t.END="END"}(o||(o={})),function(t){t.Drawflow="drawflow"}(r||(r={}));var p,g;!function(t){t.NODE_SETTINGS="NODE_SETTINGS",t.GROUP_SETTINGS="GROUP_SETTINGS"}(p||(p={})),function(t){t.in="in",t.out="out"}(g||(g={}));var b=n(19),w=n(12),j=n(13),y=n(14),m=n(18),O=n.n(m),x={width:100,height:60},k=function(){function t(e,n){Object(j.a)(this,t),this.id=void 0,this.state=void 0,this.flow=void 0,this.nodeState=void 0,this.spacingX=40,this.spacingY=60,this.id=e,this.flow=n,this.state=n.state,this.nodeState=this.state.drawflow[this.id]}return Object(y.a)(t,[{key:"head",get:function(){return this.nodeState.head}},{key:"lane",get:function(){return this.nodeState.lane}},{key:"port",get:function(){return this.nodeState.port}},{key:"portInPos",get:function(){var t,e=this;return null===(t=Object.entries(this.state.ports).find((function(t){var n=Object(u.a)(t,2),o=n[0];n[1];return o==="".concat(e.id,"_in_1")})))||void 0===t?void 0:t[1]}},{key:"outPorts",get:function(){var t=this;return Object.entries(this.state.ports).filter((function(e){var n=Object(u.a)(e,2),o=n[0];n[1];return o.startsWith("".concat(t.id,"_out"))}))}},{key:"parent",get:function(){var t,e=this,n=null===(t=Object.keys(this.state.connections).find((function(t){return t.split("_")[2]===e.id.toString()})))||void 0===t?void 0:t.split("_")[0];return n?this.flow.getNode(Number(n)):null}},{key:"parentConnection",get:function(){var t=this;return Object.keys(this.state.connections).find((function(e){var n,o=e.split("_").map(Number);return o[0]===(null===(n=t.parent)||void 0===n?void 0:n.id)&&o[2]===t.id&&1===o[3]}))}},{key:"fullWidth",get:function(){return this.nodeState.fullWidth}},{key:"totalWidth",get:function(){var t=this.childrenTotalWidth,e=(this.pureWidth,Math.max(this.pureWidth/2,this.subnodesWidth+this.width/2));return e=Math.max(this.width+this.subnodesWidth,t),this.update({fullWidth:e}),e}},{key:"pureWidth",get:function(){return Math.max(this.width,this.childrenPureWidth)}},{key:"childrenPureWidth",get:function(){var t=this.out1;if(!t.length)return 0;var e=t[t.length-1].pureWidth;return t.forEach((function(n,o){o!==t.length-1&&(e+=n.totalWidth)})),e+this.spacingX*(t.length-1)}},{key:"childrenTotalWidth",get:function(){var t=this.out1;if(!t.length)return 0;var e=0;return t.forEach((function(t){e+=t.totalWidth})),e+this.spacingX*(t.length-1)}},{key:"alignChildren",value:function(){var t=this,e=this.out1;this.update({isSub:!1,port:{out:2}});var n,o=this.pos.x-(this.leftChildrenWidth-this.width/2),r=Object(w.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,c=o+(i.leftChildrenWidth-i.width/2);i.setPos({x:c,y:this.pos.y+this.height+this.spacingY}),o+=i.totalWidth+this.spacingX,i.alignChildren()}}catch(s){r.e(s)}finally{r.f()}var a=this.subnodes;a.length&&(o=this.pos.x+this.width+this.spacingX,a.forEach((function(e){e.update(Object(h.a)({isSub:!0,port:{out:1}},x)),e.setPos({x:o,y:t.pos.y+(t.height/2-e.height/2)}),delete t.state.ports["".concat(e.id,"_out_2")],o+=e.width+t.spacingX})))}},{key:"leftChildrenWidth",get:function(){var t=this.out1;if(!t.length)return this.width/2;var e=t[0].leftChildrenWidth,n=t[t.length-1].rightChildrenWidth;return e+(this.totalWidth-e-n)/2}},{key:"rightChildrenWidth",get:function(){var t=this.out1;if(!t.length)return this.width/2;var e=t[0].leftChildrenWidth,n=t[t.length-1].rightChildrenWidth;return n+(this.totalWidth-e-n)/2}},{key:"children",value:function(t){var e=this;return Object.keys(this.state.connections).filter((function(n){return n.split("_")[0]===e.id.toString()&&n.split("_")[1]===t.toString()})).map((function(t){return e.flow.getNode(Number(t.split("_")[2]))}))}},{key:"out1",get:function(){return this.children(1)}},{key:"firstSubnode",get:function(){return this.children(2)[0]}},{key:"subnodes",get:function(){var t,e;return(null===(t=this.firstSubnode)||void 0===t||null===(e=t.flowLine)||void 0===e?void 0:e.flowLineNodes)||[]}},{key:"subnodesWidth",get:function(){var t=this;return this.subnodes.reduce((function(e,n){return e+n.width+t.spacingX}),0)}},{key:"isSub",get:function(){var t=this.parent;return!!t&&(t.firstSubnode===this||t.isSub)}},{key:"complexParentNode",get:function(){return null}},{key:"flowLine",get:function(){for(var t=[this],e=this,n=e.firstSubnode;1===e.out1.length;)n=n||e.firstSubnode,e=e.out1[0],t.push(e);return e.out1.length>1?null:{flowLineNodes:t,hasSubnodes:n}}},{key:"height",get:function(){return this.state.drawflow[this.id].height}},{key:"width",get:function(){return this.state.drawflow[this.id].width}},{key:"data",get:function(){return{}}},{key:"pos",get:function(){return this.state.drawflow[this.id].pos}},{key:"setPos",value:function(t){var e=this.pos,n=t.x,o=t.y;this.flow.moveNode({nodeId:this.id,dx:n-e.x,dy:o-e.y})}},{key:"update",value:function(t){var e=O.a.merge(this.nodeState,t);Object.assign(this.nodeState,e)}}]),t}(),N=function(){function t(e){var n=this;Object(j.a)(this,t),this.state=void 0,this.nodes={},this.distanceToConnect=100,this.distanceToDisconnect=0,this.state=e;var o=this.state.drawflow;Object.keys(o).map((function(t){return n.nodes[Number(t)]=new k(Number(t),n)}))}return Object(y.a)(t,[{key:"heads",get:function(){return Object.entries(this.nodes).filter((function(t){var e=Object(u.a)(t,2);e[0];return!e[1].parent})).map((function(t){return t[1]}))}},{key:"getNode",value:function(t){return this.nodes[t]}},{key:"alignAll",value:function(){this.setLaneNumbers(),this.heads.forEach((function(t){t.alignChildren()}))}},{key:"addConnection",value:function(t){var e=t.startId,n=t.startPort,o=t.endId,r=t.endPort;if(this.connectionAllowed(t)){var i="".concat(e,"_").concat(n,"_").concat(o,"_").concat(r);this.state.connections[i]=[]}}},{key:"connectionAllowed",value:function(t){var e=t.startId,n=t.startPort,o=t.endId;t.endPort;if(2===n&&this.getNode(e).children(n).length||this.getNode(o).parent)return!1;var r=this.getNode(o).flowLine;return!(2===n&&(!r||r.hasSubnodes))&&(!this.getNode(e).out1.length||!this.getNode(e).isSub)}},{key:"moveNode",value:function(t){var e=t.dx,n=t.dy,o=t.nodeId;this.state.drawflow[o].pos.x+=e,this.state.drawflow[o].pos.y+=n}},{key:"dragNode",value:function(t){var e=t.dx,n=t.dy,o=t.nodeId;this.moveNode({dx:e,dy:n,nodeId:o});var r=this.getNode(o),i=r.head;r.parentConnection&&(delete this.state.connections[r.parentConnection],this.alignAll());var c=r.portInPos;if(c){var a=[];if(Object.entries(this.nodes).filter((function(t){var e=Object(u.a)(t,2);e[0];return e[1].head!==i})).forEach((function(t){var e=Object(u.a)(t,2),n=e[0],r=e[1];Number(n)!==o&&r.outPorts.forEach((function(t){var e=Object(u.a)(t,2),n=e[0],o=e[1],r=Math.hypot(c.x-o.x,c.y-o.y);a.push({key:n,distance:r})}))})),a.sort((function(t,e){return t.distance-e.distance})),a.length){var s=a[0];s.distance<this.distanceToConnect?this.state.portToConnect=s.key:this.state.portToConnect=void 0}}}},{key:"setLaneNumbers",value:function(){var t=this.heads;t.forEach((function(t){return t.update({head:t.id,lane:0})}));for(var e=function(){var e=[];t.forEach((function(t){var n=t.lane+1,o=t.subnodes,r=t.head;if(void 0!==r){if(o.length){var i,c=Object(w.a)(o);try{for(c.s();!(i=c.n()).done;){i.value.update({lane:n++,head:r})}}catch(s){c.e(s)}finally{c.f()}}var a=t.children(1);a.forEach((function(t){return t.update({head:r,lane:n})})),e.push.apply(e,Object(b.a)(a))}else console.error("head is undefined in setLaneNumbers")})),t=e};t.length;)e()}}]),t}(),I={nodeId:1,canvasDrag:!1,config:{drag:!1,connectionsLabelEnable:!1,canvasTranslate:{x:0,y:0},zoom:{value:1,max:2,min:.5,tick:.1}},drawflow:{},connections:{},connectionsLabel:{},ports:{},select:null,selectId:null,selectPath:null,showButton:null,newPathDirection:null,modalType:null,editLock:!1,mouseBlockDragPos:{clientX:void 0,clientY:void 0}},C=function(t,e){t.drawflow[t.nodeId]=Object(h.a)(Object(h.a)({},e),{},{id:t.nodeId,height:0,width:0}),t.selectId=t.nodeId++,t.select={type:"node",selectId:t.selectId},t.config.drag=!0},S=Object(v.f)({name:r.Drawflow,initialState:I,reducers:{setEditLock:function(t,e){var n=e.payload;t.editLock=n},align:function(t){new N(t).alignAll()},addNode:function(t,e){var n=e.payload;return C(t,n)},moveNode:function(t,e){return new N(t).dragNode(e.payload)},setMouseBlockDragPos:function(t,e){var n=e.payload;t.mouseBlockDragPos=n},unSelect:function(t){t.config.drag=!1,t.select=null,t.selectId=null,t.showButton=null},select:function(t,e){var n=e.payload,o=n.type,r=n.selectId;t.config.drag="node"===o,t.select=n,t.selectId=null!==r&&void 0!==r?r:null},moveCanvas:function(t,e){var n=e.payload,o=n.movementX,r=n.movementY;t.canvasDrag&&(t.config.canvasTranslate.x+=o,t.config.canvasTranslate.y+=r)},canvasDrag:function(t,e){var n=e.payload;t.canvasDrag=n},canvasMouseMove:function(t,e){var n,o=e.payload,r=o.movementX,i=o.movementY,c=o.clientX,a=o.clientY;if(t.canvasDrag)t.config.canvasTranslate.x+=r,t.config.canvasTranslate.y+=i;else if("output"===(null===(n=t.select)||void 0===n?void 0:n.type))t.newPathDirection={clientX:c,clientY:a};else if(t.config.drag&&"number"===typeof t.selectId){var s=t.selectId,u=t.mouseBlockDragPos,l=u.clientX,d=u.clientY;t.mouseBlockDragPos={clientX:c,clientY:a};var f=t.config.zoom.value,h=(c-l)/f,v=(a-d)/f;new N(t).dragNode({nodeId:s,dy:v,dx:h})}},canvasMouseUp:function(t){var e,n=new N(t);if(t.portToConnect){var o=t.portToConnect.split("_").map((function(t){return Number(t)})),r=Object(u.a)(o,3),i=r[0],c=r[2],a=Number(t.selectId);n.addConnection({startId:i,startPort:c,endId:a,endPort:1})}t.portToConnect=void 0,t.newPathDirection=null,t.canvasDrag=!1,t.config.drag=!1,"output"===(null===(e=t.select)||void 0===e?void 0:e.type)&&(t.select=null),n.alignAll()},deleteNode:function(t){var e=t.connections,n=t.drawflow,o=t.ports,r=t.selectId;r&&"number"===typeof r&&(Object.keys(e).reduce((function(t,n){var o=n.split("_").map((function(t){return parseInt(t)}));return 1*o[0]!==r&&1*o[2]!==r||delete e[n],null}),null),Object.keys(o).reduce((function(t,e){return 1*e.split("_").map((function(t){return parseInt(t)}))[0]===r&&delete o[e],null}),null),delete n[r],t.select=null,t.selectId=null,t.showButton=null)},deletePath:function(t){var e=t.selectId,n=t.connections;"string"===typeof e&&delete n[e]},load:function(t,e){var n=e.payload;return Object.assign(t,I),t.drawflow=n.drawflow,t.nodeId=Object.keys(n.drawflow).length+1,t.connections=n.connections,t},addConnection:function(t,e){new N(t).addConnection(e.payload)},clear:function(){return I},pushPorts:function(t,e){var n=e.payload;t.ports=Object(h.a)(Object(h.a)({},t.ports),n)},zoom:function(t,e){var n=e.payload,o=t.config.zoom,r=o.value,i=o.max,c=o.min,a=o.tick,s=r+(n?a:-a);s<=i&&s>=c&&(o.value=s),null===n&&(t.config.canvasTranslate={x:0,y:0},o.value=1)},nodeSize:function(t,e){var n=e.payload,o=n.height,r=n.width,i=n.id;t.drawflow[i].height=o,t.drawflow[i].width=r}}}),P=S.actions,D=S.reducer,T=function(t){return t.flows[t.version]},E=n(9),_=function(){return Object(E.b)()},W=E.c,M=n(0),L={Circle:function(t){var e=t.property,n=t.svgKey,o=t.i,r=t.editLock;return Object(M.jsx)("circle",Object(h.a)(Object(h.a)({},e),{},{xmlns:"http://www.w3.org/2000/svg",className:"point",r:6,onMouseDown:function(e){r||t.select(e,{svgKey:n,i:o})}}))},Path:function(t){var e=t.svgKey,n=t.d,o=W(T).selectId,r=_(),i="main-path "+(o===e&&e?"select":"");return Object(M.jsx)("path",{xmlns:"http://www.w3.org/2000/svg",className:i,d:n,onMouseDown:function(t){t.stopPropagation(),r(P.select({type:"path",selectId:e}))}})}},X=n(11),Y=function(t){return Object(M.jsx)("div",{className:"node-block",children:JSON.stringify(t,null,2)})},z=function(t){var e=t.id,n=W(T),o=n.portToConnect,r=n.nodeId,c=n.selectId,a=n.select,s=n.config.drag,u=n.drawflow[e],l=_(),d=u.port,f=u.pos,v=Object(i.useRef)(null),p=function(t){for(var n=[],r=function(r){var i="".concat(t,"put-").concat(r),s="".concat(e,"_").concat(t,"_").concat(r),u=Object(M.jsx)("div",{onMouseDown:function(n){n.stopPropagation(),l(P.select({type:t+"put",portId:r,selectId:e}))},className:"".concat(t,"put ").concat(i," ").concat(s),onMouseUp:function(n){if("in"===t&&"number"===typeof c&&(null===a||void 0===a?void 0:a.portId)){var o=e,i=r,s=c,u=a.portId;s!==o&&l(P.addConnection({startId:s,startPort:u,endId:o,endPort:i}))}},children:Object(M.jsx)("div",{className:"indicator ".concat(o===s?" ":"invisible")})},i);n.push(u)},i=1;i<=d[t];i++)r(i);return Object(M.jsx)("div",{className:"".concat(t,"puts"),children:n})};Object(i.useEffect)((function(){if(v.current){var t=v.current,n=t.offsetHeight,o=t.offsetWidth;l(P.nodeSize({height:n,width:o,id:e}))}})),Object(i.useEffect)((function(){var t=function(t,n,o){var r="".concat(e,"_").concat(t,"_").concat(n),i=parseInt(getComputedStyle(o).left)+u.pos.x,c=parseInt(getComputedStyle(o).top)+u.pos.y;return Object(X.a)({},r,{x:i,y:c})};if(v.current){var n=Array.from(v.current.querySelector(".inputs").children),o=Array.from(v.current.querySelector(".outputs").children),r={};r=Object.assign(r,n.reduce((function(e,n,o){return Object.assign(e,t(g.in,o+1,n))}),{})),r=Object.assign(r,o.reduce((function(e,n,o){return Object.assign(e,t(g.out,o+1,n))}),{})),l(P.pushPorts(r))}}),[l,e,u.pos.x,u.pos.y]),Object(i.useEffect)((function(){if(v.current&&r-1===e&&s){var t=v.current,n=t.offsetHeight,o=t.offsetWidth;l(P.moveNode({nodeId:e,dx:.2*-o,dy:.2*-n}))}}),[]);var b={top:f.y+"px",left:f.x+"px",cursor:"move"};return u.isSub&&(b=Object(h.a)(Object(h.a)({},b),x)),Object(M.jsxs)("div",{ref:v,className:"node-".concat(e," drawflow-node-block-default")+(c===e?" select":"")+(u.isSub?" subnode":""),style:b,onMouseDown:function(t){t.stopPropagation();var n=t.clientX,o=t.clientY;l(P.select({type:"node",selectId:e})),l(P.setMouseBlockDragPos({clientX:n,clientY:o}))},onContextMenu:function(t){},onDoubleClick:function(){},children:[p(g.in),Object(M.jsx)("div",{className:"drawflow-node-content",children:Object(M.jsx)(Y,Object(h.a)({},u))}),p(g.out)]})},A=n(5),B=n.n(A),q=n(6),F=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,r=[],i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<t;c++){for(var a="",s=0;s<Math.floor(Math.random()*(n-o)+o);s++)a+=i.charAt(Math.floor(Math.random()*i.length));e.length>1&&(a+=e),r.push(a)}return r},U=function(){var t=Object(q.a)(B.a.mark((function t(e){var n,o,r;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=function(){return{type:"Asd",name:"assa",value:F(1,"",10,5)[0]}},o=[],r=0;r<e;++r)o.push(n());return t.abrupt("return",o);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(){return{id:0,type:o.MIDDLE,data:{type:"String",name:"1qdlCNXqYBsE",value:"qqweee"},port:{in:1,out:2},pos:{x:-20,y:100},isSub:!1,height:0,width:0}},R={getDummy:function(){var t=Object(q.a)(B.a.mark((function t(){var e,n,o;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e={nodes:{},connections:{"1_1_3_1":[],"4_1_2_1":[]}},n=1;n<5;++n)(o=G()).id=n,o.data.name="Node ".concat(n),o.pos.x=100*n,o.pos.y=50*n,e.nodes[n]=o;return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getFilters:U},V=Object(v.b)("versions/changed"),J=Object(v.b)("addNewNode"),K=Object(v.b)("dragTemplate"),H={version:0,flows:[I,I,I],templates:[],dragTemplate:0},Z=Object(v.c)("fetchPosts",Object(q.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.getFilters(5);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))),Q=Object(v.c)("fetchFlowVersion",Object(q.a)(B.a.mark((function t(){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.getDummy();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))),$=Object(v.e)(H,(function(t){t.addCase(V,(function(t,e){var n=e.payload;t.version=n})).addCase(J,(function(t,e){var n=e.payload,o=n.clientX,r=n.clientY;if(t.dragTemplate){var i=t.flows[t.version],c=G();c.pos=f.getPos(o,r,i.config.zoom.value),i.mouseBlockDragPos={clientX:o,clientY:r},C(i,c),t.dragTemplate=void 0}})).addCase(K,(function(t,e){var n=e.payload;t.dragTemplate=n})).addCase(Z.fulfilled,(function(t,e){t.templates=e.payload})).addCase(Q.fulfilled,(function(t,e){var n=e.payload,o=n.nodes,i=n.connections;t.flows[t.version]=D(t.flows[t.version],{type:r.Drawflow+"/load",payload:{drawflow:o,connections:i}})})).addMatcher((function(t){return t.type.startsWith(r.Drawflow)}),(function(t,e){t.flows[t.version]=D(t.flows[t.version],e)}))})),tt=Object(v.a)({reducer:$}),et=function(){var t=W((function(t){return T(t).editLock})),e=_();return Object(M.jsxs)("div",{className:"drawflow-additional",children:[!t&&Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("button",{className:"drawflow-additional-button",onClick:function(){return console.log("clear")},children:"Clear"})}),Object(M.jsx)("button",{className:"drawflow-additional-button",onClick:function(){return e(P.setEditLock(!t))},children:t?"UnLock":"Lock"})]})},nt=function(){var t=_();return Object(M.jsxs)("div",{className:"drawflow-zoom",children:[Object(M.jsx)("button",{className:"drawflow-zoom-button",onClick:function(){return t(P.zoom(!0))},children:"+"}),Object(M.jsx)("button",{className:"drawflow-zoom-button",onClick:function(){return t(P.zoom(!1))},children:"-"}),Object(M.jsx)("button",{className:"drawflow-zoom-button",onClick:function(){return t(P.zoom(null))},children:"reset"})]})},ot=function(){var t=W(T),e=t.select,n=t.config,o=t.ports,r=t.selectId,i=t.newPathDirection;if(!(null===e||void 0===e?void 0:e.portId))return console.error("Select port id not set!"),null;var c="".concat(r,"_out_").concat(e.portId);if(!o[c])return console.error("Start port key not exist"),null;if(!i)return console.error("Path direction null"),null;var a={x:o[c].x,y:o[c].y},s=n.zoom.value,u=i.clientX,l=i.clientY,d=f.getPos(u,l,s),h=f.createCurvature(a,d);return Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"drawflow-connection",children:Object(M.jsx)(L.Path,{d:h})})},rt=function(){var t=W(T),e=t.connections,n=t.ports,o=Object.entries(e).map((function(t){var e=Object(u.a)(t,1)[0],o=e.split("_"),r="".concat(o[0],"_out_").concat(o[1]),i="".concat(o[2],"_in_").concat(o[3]);if(!n[r]||!n[i])return null;var c={x:n[r].x,y:n[r].y},a={x:n[i].x,y:n[i].y},s=f.createCurvature(c,a);return Object(M.jsx)("div",{children:Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"drawflow-connection",children:Object(M.jsx)(L.Path,{svgKey:e,d:s})})},e)}));return Object(M.jsx)(M.Fragment,{children:o})},it=Object(v.d)(T,(function(t){return t.drawflow})),ct=function(){var t=W(it);return Object(M.jsx)(M.Fragment,{children:Object.values(t).map((function(t){return Object(M.jsx)(z,{id:t.id},t.id)}))})},at=function(){var t=W(T),e=t.select,n=t.config,o=n.canvasTranslate,r=o.x,c=o.y,a=n.zoom,s=t.newPathDirection,u=_();return Object(i.useEffect)((function(){u(Q())}),[u]),Object(i.useEffect)((function(){var t=function(t){"Delete"===t.key&&("path"===(null===e||void 0===e?void 0:e.type)?u(P.deletePath()):u(P.deleteNode()))};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[u,null===e||void 0===e?void 0:e.type]),Object(M.jsxs)("div",{id:"drawflow",className:"parent-drawflow",onMouseDown:function(t){t.currentTarget.classList.contains("parent-drawflow")&&(u(P.canvasDrag(!0)),u(P.unSelect()))},onMouseUp:function(){return u(P.canvasMouseUp())},onMouseMove:function(t){var e=t.clientX,n=t.clientY,o=t.movementX,r=t.movementY;u(P.canvasMouseMove({clientX:e,clientY:n,movementX:o,movementY:r}))},onMouseEnter:function(t){var e=t.clientX,n=t.clientY;u(J({clientX:e,clientY:n}))},children:[Object(M.jsx)(et,{}),Object(M.jsx)(nt,{}),Object(M.jsxs)("div",{className:"drawflow",style:{transform:"translate(".concat(r,"px, ").concat(c,"px) scale(").concat(a.value,")")},children:[Object(M.jsx)(ct,{}),Object(M.jsx)(rt,{}),s&&Object(M.jsx)(ot,{})]})]})},st=function(t){var e=t.searchWord,n=W((function(t){return t.templates})),o=_(),r=e.toLowerCase().split(" ").filter((function(t){return t.length>0}));return Object(i.useEffect)((function(){o(Z())}),[o]),Object(M.jsx)("div",{className:"drawflow-node-list-wrap",children:n.map((function(t,e){var n=t.name,i=t.type,c=t.value,a=JSON.stringify(t,null,2);return(r.find((function(t){return a.toLowerCase().includes(t)}))||!r.length)&&Object(M.jsx)("div",{className:"drawflow-node-block",onMouseDownCapture:function(t){o(K(1))},children:Object(M.jsx)("pre",{children:"Type: ".concat(i,"\nValue: ").concat(c+n)})},"drawflow-sidemenu-block-"+e)}))})};n(32);var ut=function(){var t=Object(i.useState)(""),e=Object(u.a)(t,2),n=e[0],o=e[1],r=_();return Object(i.useEffect)((function(){r(P.align())}),[r]),Object(M.jsxs)("div",{className:"App",children:[Object(M.jsxs)("div",{className:"drawflow-node-list",children:[Object(M.jsx)("div",{className:"drawflow-node-list-search",children:Object(M.jsx)("input",{type:"text",placeholder:"Search templates",onChange:function(t){o(t.target.value)}})}),Object(M.jsx)("div",{className:"drawflow-node-list-flex",children:Object(M.jsx)(st,{searchWord:n})})]}),Object(M.jsxs)("div",{className:"flow",children:[Object(M.jsxs)("div",{children:[Object(M.jsx)("button",{onClick:function(){return r(Q())},children:"Fetch flow version"}),Object(M.jsx)("button",{onClick:function(){return r(V(0))},children:"Version 1"}),Object(M.jsx)("button",{onClick:function(){return r(V(1))},children:"Version 2"}),Object(M.jsx)("button",{onClick:function(){return r(V(2))},children:"Version 3"}),Object(M.jsx)("button",{onClick:function(){return r(P.align())},children:"Align"})]}),Object(M.jsx)(at,{})]})]})};s.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(E.a,{store:tt,children:Object(M.jsx)(ut,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.6346526f.chunk.js.map